## ë¦¬ì•¡íŠ¸ í›…ì„ ì´ìš©í•œ ë§ˆì´í¬ë¡œ ìƒíƒœ ê´€ë¦¬

> ë¦¬ì•¡íŠ¸ì—ì„œ ìƒíƒœëŠ” ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ ë§í•œë‹¤.

ë¦¬ì•¡íŠ¸ í›…ì´ ë‚˜ì˜¤ê³  ë‚˜ì„œëŠ” ë¬´ì¡°ê±´ ì¤‘ì•™ ì§‘ì¤‘í˜• ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ëª©ì  ì§€í–¥ì ì¸ ë°©ë²•ìœ¼ë¡œ ì—¬ëŸ¬ ë¦¬ì•¡íŠ¸ í›… ê¸°ë°˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì ¸ì˜¤ê²Œ ëë‹¤.

í•˜ì§€ë§Œ, ğŸ“Œ **ëª©ì  ì§€í–¥ì ì¸ ë°©ë²•ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ìƒíƒœë„ ìˆê¸°ì— ì—¬ì „íˆ ë²”ìš©ì ì¸ ìƒíƒœ ê´€ë¦¬ê°€ í•„ìš”í•˜ë‹¤.** ğŸ“Œ

ë²”ìš©ì ì¸ ìƒíƒœ ê´€ë¦¬ê°€ í•„ìš”í•œ ì‘ì—… ë¹„ìœ¨ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ë§ˆë‹¤ ë‹¤ë¥¸ë° ì˜ˆë¥¼ ë“¤ì–´,

- ì„œë²„ ìƒíƒœë¥¼ ì£¼ë¡œ ë‹¤ë£¨ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ë¼ë©´ í•˜ë‚˜ ë˜ëŠ” ì†Œìˆ˜ì˜ ì „ì—­ ìƒíƒœë§Œ í•„ìš”í•˜ë‹¤.
- ë°˜ë©´ í’ë¶€í•œ ê·¸ë˜í”½ì„ ì œê³µí•˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ë§ì€ ì „ì—­ ìƒíƒœê°€ í•„ìš”í•˜ë‹¤.

> [!NOTE]
> ê·¸ë˜ì„œ, ë²”ìš©ì ì¸ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ ë°©ë²•ì€ ê°€ë²¼ì›Œì•¼ í•˜ê³  ê°œë°œìëŠ” ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ì ì ˆí•œ ë°©ë²•ì„ ì„ íƒí•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì´ë¥¼ ë§ˆì´í¬ë¡œ(ê°€ë²¼ìš´) ìƒíƒœ ê´€ë¦¬ë¼ê³  í•œë‹¤.

---

### ë¦¬ì•¡íŠ¸ í›… ì‚¬ìš©í•˜ê¸°

ë§ˆì´í¬ë¡œ ìƒíƒœ ê´€ë¦¬ë¥¼ í•˜ê¸° ìœ„í•´ì„œëŠ” ë¦¬ì•¡íŠ¸ í›…ì´ í•„ìˆ˜ë‹¤.

- `useState`: ì§€ì—­ ìƒíƒœë¥¼ ìƒì„±í•˜ëŠ” ê¸°ë³¸ì ì¸ í•¨ìˆ˜ë¡œ, ë¡œì§ì„ ìº¡ìŠí™”í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤ëŠ” íŠ¹ì§•ì´ ìˆë‹¤.
- `useReducer`: useState í›…ì²˜ëŸ¼ ì§€ì—­ ìƒíƒœë¥¼ ìƒì„±í•  ìˆ˜ ìˆê³ , useStateë¥¼ ëŒ€ì²´í•˜ëŠ” ìš©ë„ë¡œ ìì£¼ ì‚¬ìš©í•œë‹¤.
- `useEffect`: ë¦¬ì•¡íŠ¸ ë Œë”ë§ í”„ë¡œì„¸ìŠ¤ ë°”ê¹¥ì—ì„œ ë¡œì§ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤. íŠ¹íˆ ì „ì—­ ìƒíƒœë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°œë°œí•  ë–„ ì¤‘ìš”í•œë°, ê·¸ ì´ìœ ëŠ” ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ìƒëª… ì£¼ê¸°ì™€ í•¨ê»˜ ì‘ë™í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

---

### useState ì‚¬ìš©í•˜ê¸°

#### ë² ì¼ì•„ì›ƒ

```tsx
// ë²„íŠ¼ì„ ì²˜ìŒ ëˆ„ë¥´ê³  ë‚˜ì„œ ì´í›„ë¡œë¶€í„°ëŠ”, ë™ì¼í•œ ìƒíƒœê°’ì´ ì§€ì†ë˜ë¯€ë¡œ ë² ì¼ì•„ì›ƒ(bailout)ì´ ë°œìƒ
// ì¦‰, ë¦¬ë Œë”ë§ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ì¼ì–´ë‚œë‹¤.
const Component = () => {
  const [count, setCount] = useState<Number>(0);

  return (
    <div>
      {count}
      <button onClick={() => setCount(1)}>Set Count to 1</button>
    </div>
  );
};
```

#### ë¹ ë¥´ê²Œ í´ë¦­í•œ ë§Œí¼, í˜¹ì€ ì—¬ëŸ¬ë²ˆ setCountë¥¼ í˜¸ì¶œí•œ ë§Œí¼ ìˆ«ì ì•ˆì˜¬ë¼ê°€ëŠ” ì´ìœ  ì•Œê¸°

```tsx
const Component = () => {
  const [count, setCount] = useState<Number>(0);

  return (
    <div>
      {count}
      {/* <button onClick={() => setCount(count + 1)}> */}
      <button onClick={(c) => setCount(c + 1)}>Set Count to {count + 1}</button>
    </div>
  );
};
```

> [!WARNING]
> ë¦¬ì•¡íŠ¸ì—ì„œ setStateë¥¼ ì‚¬ìš©í•´ì„œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•  ê²½ìš°ì—, ì—…ë°ì´íŠ¸ëœ ìƒíƒœëŠ” ë¹„ë™ê¸°ì  íŠ¹ì„± ë•Œë¬¸ì— ì¦‰ì‹œ ë°˜ì˜ë˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë¦¬ê³ , íš¨ìœ¨ì ìœ¼ë¡œ ë Œë”ë§í•˜ê¸° ìœ„í•´ì„œ ì—¬ëŸ¬ ë²ˆì˜ ìƒíƒœê°’ ë³€ê²½ ìš”ì²­ì„ ë°°ì¹˜(batch)ë¡œ ì²˜ë¦¬í•œë‹¤. ê²°êµ­, ë¦¬ë Œë”ë§ ìš”ì²­ì— ë”°ë¥¸ ë¹„ìš©ì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ì„œ ì¼ê´„ì ì¸ ì—…ë°ì´íŠ¸ë¥¼ í•œë‹¤.

> [!NOTE]
> â“ ê·¸ëŸ¼ í•­ìƒ í•¨ìˆ˜ ì—…ë°ì´íŠ¸ë¥¼ í•´ì•¼ í• ê¹Œ? â“ - ë‚˜ì  ê±´ ì—†ì§€ë§Œ í•­ìƒ ê·¸ë˜ì•¼ë§Œ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ë¦¬ì•¡íŠ¸ëŠ” í´ë¦­ê³¼ ê°™ì€ ì˜ë„ì ì¸ ì‚¬ìš©ì ì•¡ì…˜ì— ëŒ€í•´ í•­ìƒ ë‹¤ìŒ í´ë¦­ ì „ì— ìƒíƒœê°€ ì—…ë°ì´íŠ¸ ë˜ë„ë¡ ë³´ì¥í•œë‹¤. ì¦‰, ì˜¤ë˜ëœ ìƒíƒœë¥¼ ë³¼ ìœ„í—˜ì€ ì—†ë‹¤~ë¼ê³  ê³µì‹ ë¬¸ì„œì— ì í˜€ ìˆë‹¤. ë‹¤ë§Œ ë™ì¼í•œ ì´ë²¤íŠ¸ ë‚´ì—ì„œ ì—¬ëŸ¬ ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ì—ëŠ” í•¨ìˆ˜ ì—…ë°ì´íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ í•©ë¦¬ì ì´ë‹¤.

---

### useReducer ì‚¬ìš©í•˜ê¸°

```tsx
const reducer = (state, action) => {
  switch (action.type) {
    case 'SET_TEXT':
      if (!action.text) {
        // ë² ì¼ì•„ì›ƒ
        // ì•„ë˜ì²˜ëŸ¼ state ê°ì²´ ìì²´ë¥¼ ë°˜í™˜í•´ì•¼ ë² ì¼ì•„ì›ƒì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë°,
        // ë§Œì•½ { ...state }ì„ ë°˜í™˜í•œë‹¤ë©´ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë³µì‚¬í•˜ê²Œ ë˜ë¯€ë¡œ ê²°êµ­ ë¦¬ë Œë”ë§ì´ ì´‰ë°œëœë‹¤.
        return state;
      }
      return { ...state, text: action.text };
    default:
      throw new Error('unknown action type');
  }
};

const Component = () => {
  const [state, dispatch] = useReducer(reducer, { text: 'hi' });

  return (
    <div>
      <input value={state.text} onChange={(e) => dispatch({ type: 'SET_TEXT', text: e.target.value })}>
    </div>
  );
};
```

---

### useStateì™€ useReducerì˜ ìœ ì‚¬ì ê³¼ ì°¨ì´ì 

**ìœ ì‚¬ì  - ìƒí˜¸ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.**

```tsx
// useReducerë¡œ useState êµ¬í˜„í•˜ê¸°
const reducer = (prev, action) =>
  typeof action === "function" ? action(prev) : action;

const useState = (initialState) => {
  const [state, dispatch] = useReducer(reducer, initialState);
  return [state, dispatch];
};
```

```tsx
// useStateë¡œ useReducer êµ¬í˜„í•˜ê¸°
const useReducer = (reducer, initialState) => {
  const [state, setState] = useState(initialState);
  const dispatch = (action) => setState((prev) => reducer(prev, action));
  return [state, dispatch];
};
```

**ì°¨ì´ì  - useReducerë§Œ reducerì™€ init(ì§€ì—° ì´ˆê¸°í™”ë¥¼ ìœ„í•œ ì½œë°± í•¨ìˆ˜)ì„ í›…ì´ë‚˜ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì—ì„œ ì •ì˜í•  ìˆ˜ ìˆë‹¤.**

```tsx
// useReducer
const init = (count) => ({ count });
const reducer = (prev, delta) => ({ ...prev, count: prev.count + delta });

const ComponentWithUseReducer = ({ initialCount }) => {
  const [state, dispatch] = useReducer(reducer, initialCOunt, init);

  // ...
};
```

```tsx
// useState
// í° ì°¨ì´ì ì€ ì•„ë‹ˆì§€ë§Œ useStateëŠ” ì™¸ë¶€ì—ì„œ ì •ì˜ëœ initê³¼ reducer í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤.
// ì¼ë¶€ ì¸í„°í”„ë¦¬í„°ë‚˜ ì»´íŒŒì¼ëŸ¬ëŠ” ì¸ë¼ì¸ í•¨ìˆ˜ ì—†ì´ë„ ìµœì í™”ê°€ ë” ì˜ ë  ìˆ˜ ìˆë‹¤.
const ComponentWithUseState = ({ initialCount }) => {
  const [state, setState] = useState(() => init(initialCount));
  const dispatch = (delta) => setState((prev) => reducer(prev, delta));

  // ...
};
```
